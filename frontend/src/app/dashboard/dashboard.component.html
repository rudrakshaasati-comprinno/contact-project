<app-navbar></app-navbar>

<div class="dashboard">

  <!-- HEADER -->
  <div class="dashboard-header">
    <h3>ğŸ“‡ My Contacts</h3>
    <button class="btn btn-primary"
            data-bs-toggle="modal"
            data-bs-target="#addContactModal"
            (click)="resetForm()">
      + Add Contact
    </button>
  </div>

  <!-- CONTACTS TABLE -->
  <div class="contacts-table" *ngIf="contacts.length > 0">
    <table>
      <thead>
        <tr>
          <th>ğŸ‘¤ Name</th>
          <th>ğŸ“§ Email</th>
          <th>ğŸ“ Phone</th>
          <th style="width: 180px;">âš™ï¸ Actions</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let c of contacts">
          <td><strong>{{ c.name }}</strong></td>
          <td>{{ c.email }}</td>
          <td>{{ c.phone }}</td>
          <td>
            <div class="action-buttons">
              <button
                class="btn btn-sm btn-outline-primary"
                (click)="openEditModal(c)">
                âœï¸ Edit
              </button>

              <button
                class="btn btn-sm btn-outline-danger"
                (click)="deleteContact(c.id)">
                ğŸ—‘ï¸ Delete
              </button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- PAGINATION -->
  <div class="pagination-container" *ngIf="totalPages > 1">
    <button class="pagination-btn"
            (click)="previousPage()"
            [disabled]="page === 0">
      â¬… Previous
    </button>

    <span class="fw-bold">
      Page <strong>{{ page + 1 }}</strong> of <strong>{{ totalPages }}</strong>
    </span>

    <button class="pagination-btn"
            (click)="nextPage()"
            [disabled]="page === totalPages - 1">
      Next â¡
    </button>
  </div>

  <!-- EMPTY STATE -->
  <div *ngIf="contacts.length === 0" class="empty-state">
    <div class="empty-state-icon">ğŸ“­</div>
    <h5>No Contacts Yet</h5>
    <p>Start adding your contacts to manage them efficiently</p>
    <button class="btn btn-primary mt-3"
            data-bs-toggle="modal"
            data-bs-target="#addContactModal"
            (click)="resetForm()">
      + Add Your First Contact
    </button>
  </div>

</div>

<!-- ADD / EDIT CONTACT MODAL -->
<div class="modal fade" id="addContactModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">

      <!-- FORM -->
      <form #contactForm="ngForm" (ngSubmit)="saveContact()">

        <div class="modal-header">
          <h5 class="modal-title">
            {{ editing ? 'âœï¸ Edit Contact' : 'â• Add New Contact' }}
          </h5>
          <button type="button"
                  class="btn-close"
                  data-bs-dismiss="modal">
          </button>
        </div>

        <div class="modal-body">

          <!-- NAME -->
          <div class="form-group">
            <label for="contactName">ğŸ‘¤ Full Name</label>
            <input type="text"
                   id="contactName"
                   class="form-control"
                   name="name"
                   placeholder="Enter contact name"
                   required
                   [(ngModel)]="newContact.name">
          </div>

          <!-- EMAIL -->
          <div class="form-group">
            <label for="contactEmail">ğŸ“§ Email Address</label>
            <input type="email"
                   id="contactEmail"
                   class="form-control"
                   name="email"
                   placeholder="Enter email address"
                   required
                   email
                   [(ngModel)]="newContact.email"
                   #email="ngModel">

            <!-- Validation messages -->
            <small class="error-message" *ngIf="email.invalid && email.touched">
              <span *ngIf="email.errors?.['required']">Email is required</span>
              <span *ngIf="email.errors?.['email']">Please enter a valid email</span>
            </small>
          </div>

          <!-- PHONE -->
          <div class="form-group">
            <label for="contactPhone">ğŸ“ Phone Number</label>
            <input type="text"
                   id="contactPhone"
                   class="form-control"
                   name="phone"
                   placeholder="Enter 10-digit phone number"
                   required
                   pattern="^[0-9]{10}$"
                   [(ngModel)]="newContact.phone"
                   #phone="ngModel">
            <small class="error-message" *ngIf="phone.invalid && phone.touched">
              Phone number must be exactly 10 digits
            </small>
          </div>

        </div>

        <div class="modal-footer">
          <button type="button"
                  class="cancel-btn"
                  data-bs-dismiss="modal">
            Cancel
          </button>

          <button type="submit"
                  class="save-btn"
                  [disabled]="contactForm.invalid">
            {{ editing ? 'âœ… Update Contact' : 'âœ… Save Contact' }}
          </button>
        </div>

      </form>

    </div>
  </div>
</div>
